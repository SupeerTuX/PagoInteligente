' Gambas class file

' Clase usada para el proceso de cobro con tarjeta RFID

'Declaracion del onservador
Private observador As Observer

'Contiene el id de la tarjeta ingresada
Property ID As String
Private $ID As String
'Contiene el saldo 
Property SaldoAnterior As Float
Private $SaldoAnterior As Float

Property SaldoActual As Float
Private $SaldoActual As Float





'#############################
'         Getter y Setter 
'#############################
'*******Get y Set para la propiedad ID
Private Function ID_Read() As String
  
  Return $ID
  
End

Private Sub ID_Write(id As String)
  
  $ID = id
  
End
'**************************************************
'******Get y Set para la propiedad saldo
Private Function SaldoAnterior_Read() As Float
  
  Return $SaldoAnterior
  
End

Private Sub SaldoAnterior_Write(saldo As Float)
  
  $SaldoAnterior = saldo
  
End
'***************************************************
'Getter y Setter para SaldoActual
Private Function SaldoActual_Read() As Float

  Return $SaldoActual

End

Private Sub SaldoActual_Write(Value As Float)

  $SaldoActual = Value

End

'#############################
'         Constructor 
'#############################
Public Sub _new()
  
  
End

'#############################
'           Eventos
'#############################
Public Sub addObjeto(obj As Object)
  
  observador = New Observer(obj) As "operaciones"
  
End

Public Sub operaciones_RFIDDataIn(data As String)
  
  Print "Mensaje :" & data
  
End


'#############################
'    Metodos Publicos
'#############################

'Muestra el ID y Saldo por consola
Public Sub showInfo()
  'Imprime por consola el saldo y el ID de la tarjeta
  Print "ID: " & $ID & " Saldo Actual: " & $SaldoActual & "Saldo Anterior: " & $SaldoAnterior
  
  'Imprime el ID y Saldo en el formulario principal
  FMain.lbBody1.Text = "ID: " & $ID
  FMain.lbBody2.Text = "Saldo: $" & Format$($SaldoActual, "#.#0") & " - Ant. $" & Format$($SaldoAnterior, "#.#0")
  
End


' @brief Resta el costo del pasaje al saldo, 
'         $SaldoAnterior es el saldo original de la tarjeta
'         $SaldoActual es el saldo despues de cobra el costo del pasaje
        
Public Sub RestarSaldo(costoPasaje As Float)
  
  $SaldoActual = ($SaldoAnterior - costoPasaje)
  
End



'#############################
'   Metodos Privados
'#############################



